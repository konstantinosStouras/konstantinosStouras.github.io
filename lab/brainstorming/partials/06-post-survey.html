<section class="card">
  <h2>Post-Survey: Creativity and Decision-Making</h2>
  <p>Please reflect on your experience during the ideation challenge.</p>

  <form id="postForm" novalidate>
    <div class="grid-1">
      <!-- Q1 -->
      <div>
        <label>1) Overall, how satisfied were you with the ideation process?</label>
        <div class="scale-buttons">
          <label class="scale-btn"><input type="radio" name="q1" value="1" required><span>1</span></label>
          <label class="scale-btn"><input type="radio" name="q1" value="2"><span>2</span></label>
          <label class="scale-btn"><input type="radio" name="q1" value="3"><span>3</span></label>
          <label class="scale-btn"><input type="radio" name="q1" value="4"><span>4</span></label>
          <label class="scale-btn"><input type="radio" name="q1" value="5"><span>5</span></label>
          <label class="scale-btn"><input type="radio" name="q1" value="6"><span>6</span></label>
          <label class="scale-btn"><input type="radio" name="q1" value="7"><span>7</span></label>
          <label class="scale-btn"><input type="radio" name="q1" value="8"><span>8</span></label>
          <label class="scale-btn"><input type="radio" name="q1" value="9"><span>9</span></label>
          <label class="scale-btn"><input type="radio" name="q1" value="10"><span>10</span></label>
        </div>
        <div class="hint">1 = Not satisfied at all → 10 = Extremely satisfied</div>
        <div class="danger" data-err="q1">Please select a value.</div>
      </div>

      <!-- Q2 -->
      <div>
        <label>2) How creative do you feel your ideas were during the individual phase?</label>
        <div class="scale-buttons">
          <label class="scale-btn"><input type="radio" name="q2" value="1" required><span>1</span></label>
          <label class="scale-btn"><input type="radio" name="q2" value="2"><span>2</span></label>
          <label class="scale-btn"><input type="radio" name="q2" value="3"><span>3</span></label>
          <label class="scale-btn"><input type="radio" name="q2" value="4"><span>4</span></label>
          <label class="scale-btn"><input type="radio" name="q2" value="5"><span>5</span></label>
          <label class="scale-btn"><input type="radio" name="q2" value="6"><span>6</span></label>
          <label class="scale-btn"><input type="radio" name="q2" value="7"><span>7</span></label>
          <label class="scale-btn"><input type="radio" name="q2" value="8"><span>8</span></label>
          <label class="scale-btn"><input type="radio" name="q2" value="9"><span>9</span></label>
          <label class="scale-btn"><input type="radio" name="q2" value="10"><span>10</span></label>
        </div>
        <div class="hint">1 = Not creative → 10 = Very creative</div>
        <div class="danger" data-err="q2">Please select a value.</div>
      </div>

      <!-- Q3 -->
      <div>
        <label>3) How useful was the group discussion in improving ideas?</label>
        <div class="scale-buttons">
          <label class="scale-btn"><input type="radio" name="q3" value="1" required><span>1</span></label>
          <label class="scale-btn"><input type="radio" name="q3" value="2"><span>2</span></label>
          <label class="scale-btn"><input type="radio" name="q3" value="3"><span>3</span></label>
          <label class="scale-btn"><input type="radio" name="q3" value="4"><span>4</span></label>
          <label class="scale-btn"><input type="radio" name="q3" value="5"><span>5</span></label>
          <label class="scale-btn"><input type="radio" name="q3" value="6"><span>6</span></label>
          <label class="scale-btn"><input type="radio" name="q3" value="7"><span>7</span></label>
          <label class="scale-btn"><input type="radio" name="q3" value="8"><span>8</span></label>
          <label class="scale-btn"><input type="radio" name="q3" value="9"><span>9</span></label>
          <label class="scale-btn"><input type="radio" name="q3" value="10"><span>10</span></label>
        </div>
        <div class="hint">1 = Not useful → 10 = Very useful</div>
        <div class="danger" data-err="q3">Please select a value.</div>
      </div>

      <!-- Q4 -->
      <div>
        <label>4) How confident are you in the final top-5 ideas selected by your group?</label>
        <div class="scale-buttons">
          <label class="scale-btn"><input type="radio" name="q4" value="1" required><span>1</span></label>
          <label class="scale-btn"><input type="radio" name="q4" value="2"><span>2</span></label>
          <label class="scale-btn"><input type="radio" name="q4" value="3"><span>3</span></label>
          <label class="scale-btn"><input type="radio" name="q4" value="4"><span>4</span></label>
          <label class="scale-btn"><input type="radio" name="q4" value="5"><span>5</span></label>
          <label class="scale-btn"><input type="radio" name="q4" value="6"><span>6</span></label>
          <label class="scale-btn"><input type="radio" name="q4" value="7"><span>7</span></label>
          <label class="scale-btn"><input type="radio" name="q4" value="8"><span>8</span></label>
          <label class="scale-btn"><input type="radio" name="q4" value="9"><span>9</span></label>
          <label class="scale-btn"><input type="radio" name="q4" value="10"><span>10</span></label>
        </div>
        <div class="hint">1 = Not confident → 10 = Very confident</div>
        <div class="danger" data-err="q4">Please select a value.</div>
      </div>

      <!-- Q5 -->
      <div>
        <label>5) How well did your group work together during the ideation process?</label>
        <div class="scale-buttons">
          <label class="scale-btn"><input type="radio" name="q5" value="1" required><span>1</span></label>
          <label class="scale-btn"><input type="radio" name="q5" value="2"><span>2</span></label>
          <label class="scale-btn"><input type="radio" name="q5" value="3"><span>3</span></label>
          <label class="scale-btn"><input type="radio" name="q5" value="4"><span>4</span></label>
          <label class="scale-btn"><input type="radio" name="q5" value="5"><span>5</span></label>
          <label class="scale-btn"><input type="radio" name="q5" value="6"><span>6</span></label>
          <label class="scale-btn"><input type="radio" name="q5" value="7"><span>7</span></label>
          <label class="scale-btn"><input type="radio" name="q5" value="8"><span>8</span></label>
          <label class="scale-btn"><input type="radio" name="q5" value="9"><span>9</span></label>
          <label class="scale-btn"><input type="radio" name="q5" value="10"><span>10</span></label>
        </div>
        <div class="hint">1 = Not well → 10 = Very well</div>
        <div class="danger" data-err="q5">Please select a value.</div>
      </div>

      <!-- Q6 -->
      <div>
        <label>6) How much influence do you feel you had in the final decision?</label>
        <div class="scale-buttons">
          <label class="scale-btn"><input type="radio" name="q6" value="1" required><span>1</span></label>
          <label class="scale-btn"><input type="radio" name="q6" value="2"><span>2</span></label>
          <label class="scale-btn"><input type="radio" name="q6" value="3"><span>3</span></label>
          <label class="scale-btn"><input type="radio" name="q6" value="4"><span>4</span></label>
          <label class="scale-btn"><input type="radio" name="q6" value="5"><span>5</span></label>
          <label class="scale-btn"><input type="radio" name="q6" value="6"><span>6</span></label>
          <label class="scale-btn"><input type="radio" name="q6" value="7"><span>7</span></label>
          <label class="scale-btn"><input type="radio" name="q6" value="8"><span>8</span></label>
          <label class="scale-btn"><input type="radio" name="q6" value="9"><span>9</span></label>
          <label class="scale-btn"><input type="radio" name="q6" value="10"><span>10</span></label>
        </div>
        <div class="hint">1 = No influence → 10 = Strong influence</div>
        <div class="danger" data-err="q6">Please select a value.</div>
      </div>

      <!-- Q7 -->
      <div>
        <label>7) How feasible do you think the top-5 ideas are for the market?</label>
        <div class="scale-buttons">
          <label class="scale-btn"><input type="radio" name="q7" value="1" required><span>1</span></label>
          <label class="scale-btn"><input type="radio" name="q7" value="2"><span>2</span></label>
          <label class="scale-btn"><input type="radio" name="q7" value="3"><span>3</span></label>
          <label class="scale-btn"><input type="radio" name="q7" value="4"><span>4</span></label>
          <label class="scale-btn"><input type="radio" name="q7" value="5"><span>5</span></label>
          <label class="scale-btn"><input type="radio" name="q7" value="6"><span>6</span></label>
          <label class="scale-btn"><input type="radio" name="q7" value="7"><span>7</span></label>
          <label class="scale-btn"><input type="radio" name="q7" value="8"><span>8</span></label>
          <label class="scale-btn"><input type="radio" name="q7" value="9"><span>9</span></label>
          <label class="scale-btn"><input type="radio" name="q7" value="10"><span>10</span></label>
        </div>
        <div class="hint">1 = Not feasible → 10 = Very feasible</div>
        <div class="danger" data-err="q7">Please select a value.</div>
      </div>

      <!-- Q8 -->
      <div>
        <label>8) How innovative do you think the final ideas are?</label>
        <div class="scale-buttons">
          <label class="scale-btn"><input type="radio" name="q8" value="1" required><span>1</span></label>
          <label class="scale-btn"><input type="radio" name="q8" value="2"><span>2</span></label>
          <label class="scale-btn"><input type="radio" name="q8" value="3"><span>3</span></label>
          <label class="scale-btn"><input type="radio" name="q8" value="4"><span>4</span></label>
          <label class="scale-btn"><input type="radio" name="q8" value="5"><span>5</span></label>
          <label class="scale-btn"><input type="radio" name="q8" value="6"><span>6</span></label>
          <label class="scale-btn"><input type="radio" name="q8" value="7"><span>7</span></label>
          <label class="scale-btn"><input type="radio" name="q8" value="8"><span>8</span></label>
          <label class="scale-btn"><input type="radio" name="q8" value="9"><span>9</span></label>
          <label class="scale-btn"><input type="radio" name="q8" value="10"><span>10</span></label>
        </div>
        <div class="hint">1 = Not innovative → 10 = Very innovative</div>
        <div class="danger" data-err="q8">Please select a value.</div>
      </div>

      <!-- Q9 -->
      <div>
        <label>9) How likely are you to recommend this ideation process to others?</label>
        <div class="scale-buttons">
          <label class="scale-btn"><input type="radio" name="q9" value="1" required><span>1</span></label>
          <label class="scale-btn"><input type="radio" name="q9" value="2"><span>2</span></label>
          <label class="scale-btn"><input type="radio" name="q9" value="3"><span>3</span></label>
          <label class="scale-btn"><input type="radio" name="q9" value="4"><span>4</span></label>
          <label class="scale-btn"><input type="radio" name="q9" value="5"><span>5</span></label>
          <label class="scale-btn"><input type="radio" name="q9" value="6"><span>6</span></label>
          <label class="scale-btn"><input type="radio" name="q9" value="7"><span>7</span></label>
          <label class="scale-btn"><input type="radio" name="q9" value="8"><span>8</span></label>
          <label class="scale-btn"><input type="radio" name="q9" value="9"><span>9</span></label>
          <label class="scale-btn"><input type="radio" name="q9" value="10"><span>10</span></label>
        </div>
        <div class="hint">1 = Not likely → 10 = Very likely</div>
        <div class="danger" data-err="q9">Please select a value.</div>
      </div>

      <!-- Q10 -->
      <div>
        <label>10) How would you rate your overall experience participating in this challenge?</label>
        <div class="scale-buttons">
          <label class="scale-btn"><input type="radio" name="q10" value="1" required><span>1</span></label>
          <label class="scale-btn"><input type="radio" name="q10" value="2"><span>2</span></label>
          <label class="scale-btn"><input type="radio" name="q10" value="3"><span>3</span></label>
          <label class="scale-btn"><input type="radio" name="q10" value="4"><span>4</span></label>
          <label class="scale-btn"><input type="radio" name="q10" value="5"><span>5</span></label>
          <label class="scale-btn"><input type="radio" name="q10" value="6"><span>6</span></label>
          <label class="scale-btn"><input type="radio" name="q10" value="7"><span>7</span></label>
          <label class="scale-btn"><input type="radio" name="q10" value="8"><span>8</span></label>
          <label class="scale-btn"><input type="radio" name="q10" value="9"><span>9</span></label>
          <label class="scale-btn"><input type="radio" name="q10" value="10"><span>10</span></label>
        </div>
        <div class="hint">1 = Poor → 10 = Excellent</div>
        <div class="danger" data-err="q10">Please select a value.</div>
      </div>

      <!-- Optional comments -->
      <div style="margin-top:20px;">
        <label>Additional Comments (Optional)</label>
        <textarea name="comments" rows="5" placeholder="Share any additional thoughts about your experience..."></textarea>
      </div>
    </div>

    <div style="text-align:center;margin-top:24px;">
      <button id="submitBtn" class="btn" type="submit" data-next>Submit Survey</button>
      <div class="foot" style="margin-top:12px;">All 1–10 scale questions are required.</div>
    </div>
  </form>
</section>

<script>
  const MANDATORY_MODE = true;

  const form = document.getElementById('postForm');
  const submitBtn = document.getElementById('submitBtn');
  const requiredGroups = ['q1','q2','q3','q4','q5','q6','q7','q8','q9','q10'];

  function groupAnswered(name){
    return [...document.querySelectorAll(`input[name="${name}"]`)].some(r=>r.checked);
  }

  function validateLive(){
    if (!MANDATORY_MODE) {
      submitBtn.disabled = false;
      requiredGroups.forEach(name => {
        const err = document.querySelector(`[data-err="${name}"]`);
        if (err) err.style.display = 'none';
      });
      return true;
    }

    let ok = true;
    requiredGroups.forEach(name=>{
      const answered = groupAnswered(name);
      const err = document.querySelector(`[data-err="${name}"]`);
      if (err) err.style.display = answered ? 'none' : 'block';
      if (!answered) ok = false;
    });
    submitBtn.disabled = !ok;
    return ok;
  }

  // Add live listeners
  requiredGroups.forEach(name=>{
    document.querySelectorAll(`input[name="${name}"]`).forEach(r=>{
      r.addEventListener('change', validateLive);
    });
  });

  // Initial validation state
  validateLive();

  form.addEventListener('submit', (e)=>{
    e.preventDefault();

    if (MANDATORY_MODE) {
      validateLive();
      if (submitBtn.disabled) {
        window.scrollTo({ top: 0, behavior: 'smooth' });
        return;
      }
    }

    const data = new FormData(form);
    const payload = Object.fromEntries(data.entries());
    console.log('Post-survey payload:', payload);

    if (window.__APP__) window.__APP__.next();
  });
</script>